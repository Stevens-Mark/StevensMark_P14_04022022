"use strict";(()=>{var Jt=Object.defineProperty;var o=(x,E)=>Jt(x,"name",{value:E,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1009],{60161:(x,E,u)=>{var m=u(86404),h=u(64463),y=u(65935);(0,h.N7)(".js-discussions-goto-answer-button",{add:e=>{const t=e.getAttribute("href"),n=document.querySelector(t);n&&(0,m.RB)(e,"click",s=>{if(t){s.preventDefault();let a="center";n.getBoundingClientRect().height>=window.innerHeight&&(a="start"),n.scrollIntoView({behavior:"smooth",block:a})}},{capture:!0})}}),(0,h.N7)(".js-discussions-title-container",{add:e=>{e.querySelector(".js-discussions-goto-answer-button")?b():v()}});function b(){const e=document.querySelector(".js-discussion");e&&e.classList.add("answered")}o(b,"removeMarkAsAnswerButtons");function v(){const e=document.querySelector(".js-discussion");e&&e.classList.remove("answered")}o(v,"addMarkAsAnswerButtons"),(0,y.AC)(".js-discussion-comment-mark-answer",async function(e,t){await p(e,t)}),(0,y.AC)(".js-discussion-comment-unmark-answer",async function(e,t){await p(e,t)});async function p(e,t){const n=await t.html();let s=e;const a=e.closest("[data-replace-remote-form-target]");if(a){const g=a.getAttribute("data-replace-remote-form-target");s=g?document.getElementById(g):a}s.replaceWith(n.html)}o(p,"replaceAnswerForm");var r=u(59753),i=u(84570);(0,i.w4)("keyup",".js-discussion-category-name-field",function(){const e=document.querySelector(".js-discussion-category-form");if(!e)return;const t=e.querySelector(".js-discussion-category-name-field"),n=e.querySelector(".js-submit-discussion-category");t.value.length>0&&(n.disabled=!1)}),(0,r.on)("click",".js-discussion-category-toggle-emoji-picker",function(e){const n=l(e).querySelector(".js-discussion-category-emoji-picker");n.hidden=!n.hidden}),(0,r.on)("click",".js-discussion-category-emoji-button",function(e){if(!(e.currentTarget instanceof HTMLButtonElement))return;const t=l(e),n=t.querySelector(".js-discussion-category-emoji-field");n.value=e.currentTarget.value;const s=t.querySelector(".js-discussion-category-custom-emoji");s.innerHTML=e.currentTarget.innerHTML;for(const g of t.querySelectorAll(".selected-emoji"))g.classList.remove("selected-emoji");e.currentTarget.classList.add("selected-emoji");const a=t.querySelector(".js-discussion-category-emoji-picker");a.hidden=!0});function l(e){return e.currentTarget.closest(".js-discussion-category-form")}o(l,"getDiscussionCategoryContainer");function d(e){var t;const n=document.querySelector("#category-select-header"),s=document.querySelector(".js-discussion-category-select-label"),a=(t=e.querySelector(".js-discussion-category-emoji"))==null?void 0:t.cloneNode(!0),g=document.createTextNode(e.getAttribute("data-category-name")),F=e.getAttribute("data-supports-polls"),P=document.createElement("span");n instanceof HTMLElement&&(P.setAttribute("id","category-select-header"),P.setAttribute("class","css-truncate css-truncate-target"),P.setAttribute("data-supports-polls",F),a instanceof HTMLElement&&(a.classList.add("mr-2"),P.appendChild(a)),P.appendChild(g),n.replaceWith(P),s instanceof HTMLElement&&(s.hidden=!1))}o(d,"updateHeader");function c(e){const t=document.querySelector("#discussion_poll_form");!t||(t.hidden=!e)}o(c,"displayPollForm"),(0,r.on)("click",".js-poll-option-template-button",function(e){var t;const s=e.currentTarget.parentElement,a=s.querySelector(".js-poll-option-destroy-field");a?(a.value="true",(t=a.nextElementSibling)==null||t.classList.remove("js-poll-option"),s.hidden=!0):s.remove();const g=document.querySelector(".js-add-poll-option");(g==null?void 0:g.hidden)&&(g.hidden=!1,g.setAttribute("aria-hidden","false"))}),(0,r.on)("click",".js-add-poll-option",function(e){const t=e.currentTarget,n=document.querySelector("#poll-option-container"),s=+n.getAttribute("data-poll-options-limit"),a=document.querySelector(".js-poll-option-template"),g=n.getAttribute("data-new-discussion")==="true";if(n&&a){const P=a.cloneNode(!0);P.hidden=!1;const X=P.querySelector(".js-poll-option-template-input");if(g)X.name="discussion[poll_attributes][options_attributes][][option]";else{const jt=n.getAttribute("data-poll-option-next-key");X.name=`discussion[poll_attributes][options_attributes][${jt}][option]`,n.setAttribute("data-poll-option-next-key",`${parseInt(jt)+1}`)}n.appendChild(P)}const F=n.querySelectorAll(".js-poll-option").length;t&&F>=s&&(t.hidden=!0,t.setAttribute("aria-hidden","true"))}),(0,r.on)("details-menu-selected",".js-discussion-category-select",function(e){const t=e.detail.relatedTarget,n=document.querySelector("#discussion_category_id"),s=document.querySelector("#submit"),a=document.querySelector("#new_discussion");d(t);const g=t.getAttribute("data-supports-polls");if(n instanceof HTMLInputElement){if(n.setAttribute("value",t.id),g==="true"){const F=document.querySelector(".js-previewable-comment-form");(F==null?void 0:F.classList.contains("preview-selected"))||c(!0)}else c(!1);a instanceof HTMLFormElement&&a.checkValidity()&&(s==null||s.removeAttribute("disabled"))}},{capture:!0});var w=u(48818),T=u(98555),j=u(69567);function f(e,t={}){return t=new URLSearchParams(t),`${e}?${t}`}o(f,"createUrl");function A(e){if(e.previousElementSibling){const t=e.previousElementSibling;t.hidden=!0}}o(A,"skipTranslation");async function M(e,t){const n=t.getAttribute("data-translation-banner-url");if(t.removeAttribute("data-translation-banner-url"),!n)return;const s=new URLSearchParams({source_language:e}),a=await fetch(`${n}?${s}`);t.innerHTML+=await a.text()}o(M,"appendBanner");async function W(e,t){const n=e.closest(".timeline-comment"),s=n==null?void 0:n.querySelector(".js-translation-trigger-container");if(!s)return;const a=new w.q;a.sourceElement=n.querySelector(".js-translation-source"),a.payloadMetadata={resourceUrl:t,url:window.location.href},await a.resolveLanguage();const g=a.language;if(!await a.isTranslatable())return A(s);a.sourceElement.after(a),(await q(a,s,t)).closest("details-menu").classList.add("width-auto");const X=document.querySelector(".js-translation-banner-container");X&&M(g,X)}o(W,"enableCommentTranslationOption");async function q(e,t,n){const s=document.getElementById("translation-trigger-for-discussion-or-comment-template");t.append(new j.R(s,{}));let a=new T.Z;a.src=f("/localization/ugct/link",{source_language:e.language,target_language:e.targetLanguage,url:n}),a.appendTo(t),a=t.querySelector("remote-content"),await a.load();const g=a.querySelector(".js-translation-trigger");g.hidden=!1,g.disabled=await e.alreadyTranslated();const F=t.querySelector(".js-translation-spinner");return F.hidden=!0,g.addEventListener("click",async()=>{await e.load(),g.disabled=!0}),Promise.resolve(g)}o(q,"loadTrigger");var V=u(52660);(0,h.N7)(".js-discussions-comment-actions-button",{subscribe:e=>(0,m.RB)(e,"mouseover",J,{capture:!1,once:!0})}),(0,r.on)("click",".js-discussions-comment-actions-button",function({currentTarget:e}){et(e)}),(0,h.N7)(".js-discussions-comment-actions-rendered-button",{add:e=>tt(e)}),(0,h.N7)(".js-translation-banner-container",{add(){const e=document.querySelector(".js-discussions-comment-actions-button");e&&G(e)}});function J(e){const t=e.currentTarget;G(t)}o(J,"handleMouseover");function tt(e){const t=e.closest(".timeline-comment-actions");if(!!t&&t.hasAttribute("data-open-after-click")){t.removeAttribute("data-open-after-click");const n=e.closest("details");if(!n)return;n.setAttribute("open","")}}o(tt,"conditionallyOpenMenu");async function G(e){if(!e)return;const t=e.closest(".timeline-comment-actions");if(!t)return;const n=t.querySelector(".js-discussions-comment-actions-container");if(!n)return;const s=n.getAttribute("data-comment-actions-url");if(!s)return;const a=await(0,V.a)(document,s);!a||(n.replaceWith(a),W(t,s))}o(G,"insertCommentActions");function et(e){if(!e)return;const t=e.closest(".timeline-comment-actions");!t||t.setAttribute("data-open-after-click","")}o(et,"setClickAfterInsert"),(0,h.N7)(".js-discussions-comment-edit-button",{subscribe:e=>(0,m.RB)(e,"click",Z,{capture:!1,once:!0})}),(0,h.N7)(".js-task-list-container .contains-task-list",{add:async e=>nt(e)});async function nt(e){const t=e.closest(".js-comment"),n=B(t);if(n){if(n.querySelector(".js-preview-body"))return;const a=n.getAttribute("data-permissions-url"),g=L(n).targetType;a&&g&&await D(a,g)&&(_(t),Y(t))}}o(nt,"conditionallyRenderEditForm");async function D(e,t){return(await(await fetch(e,{headers:{Accept:"application/json"}})).json())[t].update}o(D,"fetchAndReturnUpdatePermission");function Z(e){const n=e.currentTarget.closest(".js-comment");_(n),Y(n),S(n)}o(Z,"handleClick");function Y(e){const t=e.querySelector(".js-discussions-markdown-toolbar-placeholder:last-child");if(t){const n={textareaId:t.getAttribute("data-textarea-id")};C("template.js-discussions-markdown-toolbar-template",t,n)}}o(Y,"insertMarkdownToolbar");function S(e){const t=e.querySelector(".js-discussions-poll-edit-placeholder");if(t){const n=t.getAttribute("data-poll-edit-url");if(n==="")return;C("template.js-discussions-poll-edit-template",t,{pollEditUrl:n});const a=e.querySelector(".js-poll-edit-confirm");a.hidden=!1}}o(S,"insertPollEditForm");function _(e){const t=B(e);if(t){const n=L(t);C("template.js-discussions-edit-form-template",t,n)}}o(_,"insertEditForm");function B(e){return e.querySelector(".js-edit-comment-form-container")}o(B,"editFormTargetContainer");function L(e){return{bodyVersion:e.getAttribute("data-body-version"),outerDivClasses:e.getAttribute("data-outer-div-classes"),repositoryId:e.getAttribute("data-repository-id"),targetBody:e.getAttribute("data-target-body"),targetType:e.getAttribute("data-target-type"),textareaId:e.getAttribute("data-textarea-id"),slashCommandUrl:e.getAttribute("data-slash-command-url"),pollEditUrl:e.getAttribute("data-poll-edit-url")}}o(L,"editFormTemplateReplacements");function C(e,t,n){const s=document.querySelector(e);s&&(t.innerHTML="",t.appendChild(new j.R(s,n)))}o(C,"insertTemplate"),(0,h.N7)(".js-optimistic-reaction-render-button",{subscribe:e=>(0,m.RB)(e,"click",R,{capture:!1})});function R(e){const t=e.currentTarget;if(t){const n=new U(t);setTimeout(()=>{n.render()},1)}}o(R,"handleReactionEvent");class U{constructor(t){this.clickedReactionButton=t}render(){if(!this.isReactionAlreadyRendered)return this.addNewReactionGroup();this.isAddingReaction?this.addReactionToGroup():this.removeReactionFromGroup()}addReactionToGroup(){this.existingReactionGroupCountContainer&&this.existingReactionGroup&&(this.existingReactionGroup.removeAttribute("hidden"),this.existingReactionGroup.classList.add("user-has-reacted"),this.existingReactionGroup.hasAttribute("data-user-has-reacted-class-name")&&this.existingReactionGroup.classList.add(this.existingReactionGroup.getAttribute("data-user-has-reacted-class-name")),this.existingReactionGroupCountContainer.textContent=`${this.existingReactionGroupCount+1}`,this.addReactionToPopoverReactionButtons())}removeReactionFromGroup(){var t,n,s;this.existingReactionGroupCount===1&&this.existingReactionGroup.setAttribute("hidden",""),this.existingReactionGroupCountContainer.textContent=`${this.existingReactionGroupCount-1}`,(t=this.existingReactionGroup)==null||t.classList.remove("user-has-reacted"),((n=this.existingReactionGroup)==null?void 0:n.hasAttribute("data-user-has-reacted-class-name"))&&((s=this.existingReactionGroup)==null||s.classList.remove(this.existingReactionGroup.getAttribute("data-user-has-reacted-class-name"))),this.removeReactionFromPopoverReactionButtons()}addNewReactionGroup(){const t=this.newEmojiButtonFromTemplate();this.newEmojiButtonTemplateContainer&&t&&this.commentReactionsContainer&&(this.nextButtonGroup?this.reactionGroupsContainer.insertBefore(t,this.nextButtonGroup):this.reactionGroupsContainer.append(t),t.classList.add(this.tooltipPositionClass),this.addReactionToPopoverReactionButtons(),this.commentReactionsContainer.classList.contains("d-md-none")&&this.commentReactionsContainer.classList.add("has-reactions"))}newEmojiButtonFromTemplate(){if(this.newEmojiButtonTemplateContainer){const n=this.newEmojiButtonTemplateContainer.content.querySelector(".js-reaction-group-button");if(n)return n.cloneNode(!0)}}get nextButtonGroup(){if(this.newEmojiButtonFromTemplatePosition!==void 0&&this.newEmojiButtonFromTemplatePosition!==null){const t=this.reactionGroupsContainer.children;for(const n of t)if(Number(n.getAttribute("data-button-index-position"))>this.newEmojiButtonFromTemplatePosition)return n}}get commentContainer(){return this.clickedReactionButton.closest(".js-comment")}get buttonsContainer(){return this.commentContainer.querySelector(".js-reaction-buttons-container")}get reactionContent(){return this.clickedReactionButton.getAttribute("data-reaction-content")}get reactionGroup(){return this.buttonsContainer.querySelector(`.comment-reactions-options g-emoji[alias='${this.reactionContent}'`)}get existingReactionGroup(){if(this.reactionGroup)return this.reactionGroup.closest(".js-reaction-group-button")}get existingReactionGroupCountContainer(){if(this.existingReactionGroup)return this.existingReactionGroup.querySelector(".js-discussion-reaction-group-count")}get newEmojiButtonTemplateContainer(){return document.getElementById(`emoji-reaction-button-template-${this.reactionContent}`)}get commentReactionsContainer(){return this.buttonsContainer.closest(".js-reaction-buttons-container")}get reactionGroupsContainer(){return this.buttonsContainer.querySelector(".js-comment-reactions-options")}get isReactionAlreadyRendered(){return!!this.reactionGroup}get isAddingReaction(){if(this.existingReactionGroup)return this.existingReactionGroup.hasAttribute("data-user-has-reacted-class-name")?this.existingReactionGroup.classList.contains(this.existingReactionGroup.getAttribute("data-user-has-reacted-class-name")):!this.existingReactionGroup.classList.contains("user-has-reacted")}get existingReactionGroupCount(){return this.existingReactionGroupCountContainer?Number(this.existingReactionGroupCountContainer.innerHTML):0}get newEmojiButtonFromTemplatePosition(){const t=this.newEmojiButtonFromTemplate();if(t)return Number(t.getAttribute("data-button-index-position"))}get tooltipPositionClass(){return this.buttonsContainer.querySelectorAll("button").length>1?"tooltipped-s":"tooltipped-se"}addReactionToPopoverReactionButtons(){const t=this.commentContainer.querySelectorAll(".js-add-reaction-popover");for(const n of t){const s=n.querySelector(`button[data-reaction-content="${this.reactionContent}"]`);s.classList.add("border","color-border-default","color-bg-accent"),s.value.match(/unreact/)||(s.value=s.value.replace(/react/,"unreact"))}}removeReactionFromPopoverReactionButtons(){const t=this.commentContainer.querySelectorAll(".js-add-reaction-popover");for(const n of t){const s=n.querySelector(`button[data-reaction-content="${this.reactionContent}"]`);s.classList.remove("border","color-border-default","color-bg-accent"),s.value.match(/unreact/)&&(s.value=s.value.replace(/unreact/,"react"))}}}o(U,"OptimisticReactionRenderer");var I=u(95140);(0,h.N7)(".js-inline-comment-form-container",{add:e=>k(e)}),(0,r.on)("click",".js-discussions-previewable-comment-form",function({currentTarget:e}){$(e,{willFocus:!0})}),(0,h.N7)(".js-discussions-previewable-comment-form-auto-replace",{add:e=>$(e,{willFocus:!1})}),(0,r.on)("quote-selection",".js-discussion-quote-selection",function(e){const t=e.detail,n=t.closest(".js-timeline-discussion-comment");if(!n)return;const s=t.range;$(n,{willFocus:!0}),t.range=s});function k(e){const t=e.closest(".discussion-timeline-item.js-comment-container");t&&t.getAttribute("data-open-edit-form-after-load")==="true"&&(t.setAttribute("data-open-edit-form-after-load","false"),$(e,{willFocus:!0}))}o(k,"conditionallyInsertForm");function $(e,t){const n=e.closest(".js-timeline-discussion-comment"),s=n.querySelector(".js-discussions-previewable-comment-form-container");if(!s)return;const a=s.getAttribute("data-parent-comment-id"),g=s.getAttribute("data-anchor-id"),F=s.getAttribute("data-back-page"),P=document.querySelector("template.js-new-comment-template");a&&P&&!s.querySelector(".js-discussion-comment-form")&&(s.innerHTML="",s.appendChild(new j.R(P,{id:a,random:crypto.randomUUID(),anchorId:g,backPage:F}))),t.willFocus&&(0,I.j)(n)}o($,"insertForm"),(0,y.AC)(".js-discussions-previewable-comment-form-container .js-discussion-comment-form",async function(e,t){var n;await t.text(),(0,I.w)(e),(n=e.closest(".js-discussions-previewable-comment-form-container").querySelector(".js-comment-form-error"))==null||n.classList.add("d-none")});var N=u(95412),H=u(36162),rt=u(4687),Q=u(82036),at=u(41311);async function ot(){const e=O(),t=e.value,s=t.slice(0,e.selectionEnd).split(/\s+/).pop();st().hidden=!1,O().setAttribute("aria-expanded","true");const[a,g]=s.split(":");g!=null?await Pt(a,g):It(a);const F=Ft();t.trim().length>0?(F.hidden=!1,(0,N.T_)(z())):(F.hidden=!0,(0,N.QZ)(z()))}o(ot,"updateSearchSuggestionResults");function At(){const e=O();e.value="",e.getAttribute("data-initial-value").trim().length===0?ot():(0,Q.Bt)(z())}o(At,"handleSearchClear");function St(e){switch(e.detail.hotkey){case"Enter":if(O().value.trim()!==""||lt().querySelector(".js-navigation-item.navigation-focus"))return;(0,Q.Bt)(z());return;case"Escape":st().hidden=!0,O().setAttribute("aria-expanded","false");break}}o(St,"handleSearchInputKeydown");function xt(e){if(e&&e.target){const t=e.target,n=O();n!=null&&n.setAttribute("aria-activedescendant",t.id)}}o(xt,"handleSearchFormFocus");function ct(){(0,N.jK)(z()),st().hidden=!0,O().setAttribute("aria-expanded","false")}o(ct,"hideSearchSuggestions");function Lt(e){const t=O(),n=e.target;if(n.hasAttribute("data-search")){(0,Q.Bt)(z());return}let s=n.getAttribute("data-value");s[s.length-1]!==":"&&(s+=" ");const a=t.value.slice(0,t.selectionEnd).replace(/\S+$/,""),g=t.value.slice(t.selectionEnd);let F="";g.length>0&&g[0]!==" "&&(F=" "),t.value=a+s+F+g,e.preventDefault(),t.focus();const P=a.length+s.length;t.setSelectionRange(P,P),(0,r.f)(t,"input")}o(Lt,"handleSelectedSuggestionResultEvent");function Rt(){const e=O(),t=e.value.length;e.setSelectionRange(t,t),e.focus(),ct()}o(Rt,"restoreSearchInputFocus");function z(){return document.querySelector(".js-discussion-search-form")}o(z,"getSearchForm");function O(){return document.querySelector(".js-discussion-search-input")}o(O,"getSearchInput");function st(){return document.querySelector(".js-discussion-search-autocomplete-dropdown")}o(st,"getSearchAutocompleteDropdown");function lt(){return document.querySelector(".js-discussion-search-autocomplete-results")}o(lt,"getSearchAutocompleteResultsContainer");function Ft(){return document.querySelector(".js-discussion-search-clear")}o(Ft,"getSearchClearButton");const _t=(0,rt.Z)(Bt);function Bt(){return[{value:"author:",description:"filter by discussion author"},{value:"category:",description:"filter by discussion category"},{value:"is:",description:"filter by answered or unanswered"}]}o(Bt,"fetchQualifierSuggestions");async function Pt(e,t){const n=Mt(e),s=dt(n,t).then(a=>a.map(g=>({value:`${e}:${g.value}`,description:g.description})));mt(s)}o(Pt,"renderValueSuggestions");async function Mt(e){switch(e){case"author":return kt();case"category":return Dt();case"label":return Ot();case"is":return qt();default:return[]}}o(Mt,"fetchSuggestionsForQualifier");const ut=(0,rt.Z)(async e=>await(await fetch(e,{headers:{Accept:"application/json"}})).json());async function kt(){const e=O().getAttribute("data-suggestable-authors-path");return ut(e)}o(kt,"fetchAuthorSuggestions");async function Dt(){return JSON.parse(O().getAttribute("data-suggestable-categories"))}o(Dt,"fetchCategorySuggestions");async function Ot(){const e=O().getAttribute("data-suggestable-labels-path");return ut(e)}o(Ot,"fetchLabelSuggestions");async function qt(){return[{value:"answered"},{value:"unanswered"}]}o(qt,"fetchTypeSuggestions");function It(e){const t=_t(),n=dt(t,e,{fuzzy:!1}).then(s=>s.length===0?t:s);mt(n)}o(It,"renderQualifierSuggestions");async function dt(e,t,{fuzzy:n}={fuzzy:!0}){const s=await e,a=t.trim();return!a||a.length===0?s:s.filter(g=>n?g.value.includes(a):g.value.startsWith(a))}o(dt,"filterSuggestionsList");async function mt(e){const t=e.then(n=>n.length===0?H.dy``:ht());(0,H.sY)(H.dy`
      <div aria-live="assertive">
        ${Ut()} ${(0,at.C)(t,ht())}
        ${(0,at.C)(Ht(e),H.dy` loading... `)}
      </div>
    `,lt())}o(mt,"renderSuggestionDropdown");function ht(){return H.dy`<h6 class="width-full text-normal border-bottom color-bg-default color-fg-muted py-2 mb-2">
    Suggested filters
  </h6>`}o(ht,"renderSuggestionsTitle");function Ut(){const e=O().value.trim();return e.length===0?H.dy``:H.dy`
    <div
      class="d-flex flex-justify-between border-bottom-0 rounded-2 py-1 px-2 mx-0 mb-1 js-navigation-item"
      data-search="true"
    >
      <span class="text-bold">${e}</span>
      <svg class="octicon mt-1" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
        <path
          transform-origin="center"
          transform="scale(1,-1) translate(0, 1)"
          fill-rule="evenodd"
          d="M6.78 1.97a.75.75 0 010 1.06L3.81 6h6.44A4.75 4.75 0 0115 10.75v2.5a.75.75 0 01-1.5 0v-2.5a3.25 3.25 0 00-3.25-3.25H3.81l2.97 2.97a.75.75 0 11-1.06 1.06L1.47 7.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0z"
        ></path>
      </svg>
    </div>
  `}o(Ut,"renderSearchSuggestion");async function Ht(e){return(await e).map((n,s)=>H.dy`
        <div
          role="option"
          id="discussions-search-option-${s}"
          class="border-bottom-0 rounded-2 py-1 px-2 mx-0 mb-1 js-navigation-item"
          data-value="${n.value}"
        >
          <span class="text-bold">${n.value}</span>
          <span class="autocomplete-text-qualifier color-fg-muted">${n.description}</span>
        </div>
      `)}o(Ht,"renderSuggestionList"),(0,r.on)("focusin",".js-discussion-search-input",ot),(0,r.on)("focusout:delay",".js-discussion-search-input",ct),(0,r.on)("navigation:open",".js-discussion-search-form",e=>{Lt(e)}),(0,r.on)("navigation:focus",".js-discussion-search-form",e=>{xt(e)}),(0,r.on)("navigation:keydown",".js-discussion-search-form",e=>{St(e)}),(0,h.N7)(".js-discussion-search-input",e=>{e.addEventListener("input",ot)}),(0,r.on)("click",".js-discussion-search-clear",At);let it=!1;(0,r.on)("submit",".js-discussion-search-form",()=>(it=!0,!0)),document.addEventListener("pjax:end",function(){it&&Rt(),it=!1});var $t=u(59817);(0,h.N7)(".js-confetti-party",()=>{(0,$t.Z)()}),(0,r.on)("change",".js-discussion-spotlight-preview-trigger",function(e){const t=e.currentTarget,s=t.closest("form").querySelectorAll(`input[name="${t.name}"]`);for(const a of s){const g=a.closest("label");a.checked?g.setAttribute("aria-selected","true"):g.setAttribute("aria-selected","false")}Gt(t)}),(0,r.on)("click",".js-toggle-manage-discussion-spotlight",function(e){e.target instanceof HTMLElement});function Gt(e){const n=pt(e).querySelector(".js-discussion-spotlight-preview");Nt(n)}o(Gt,"previewTriggerChanged");async function Nt(e){const t=pt(e),n=e.getAttribute("data-url"),s=new URL(n,window.location.origin),a=t.querySelector(".js-discussion-spotlight-form");s.search+=(s.search?"&":"")+(0,Q.qC)(a);let g;try{g=await(0,V.a)(document,s.toString())}catch{return}e.replaceWith(g)}o(Nt,"updateSpotlightPreview");function pt(e){return e.closest(".js-manage-discussion-spotlight-container")}o(pt,"getManageSpotlightContainer"),(0,y.AC)(".js-spotlight-notice-dismiss",async function(e,t){await t.text(),e.closest(".js-notice").remove(),document.querySelector(".js-discussions-categories")&&document.querySelector(".js-discussions-categories").classList.remove("v-hidden")}),(0,h.N7)(".js-discussion-spotlights-sortable",{async add(e){const{Sortable:t}=await u.e(891).then(u.bind(u,891));t.create(e,{animation:150,handle:".js-discussion-spotlight-handle",onUpdate:async()=>{const n=e.getAttribute("data-update-url"),a=Array.from(e.querySelectorAll(".js-discussion-spotlight")).map(F=>F.getAttribute("data-id")),g=e.parentElement.querySelector(".js-data-url-csrf");!g||await fetch(n,{method:"PUT",mode:"same-origin",body:JSON.stringify({spotlight_ids:a}),headers:{"Content-Type":"application/json",Accept:"application/json","Scoped-CSRF-Token":g.value,"X-Requested-With":"XMLHttpRequest"}})}})}}),(0,r.on)("click",".js-discussion-comment-thread-expand-button",function({currentTarget:e}){const t=ft(e);!t||Wt(t)}),(0,r.on)("click",".js-discussions-fetch-all-paginated-comments",function({currentTarget:e}){const t=ft(e);!t||Vt(t)});function Wt(e){Kt(e)&&e.setAttribute("data-open-edit-form-after-load","true")}o(Wt,"conditionallyOpenEditFormAfterLoad");function Vt(e){const t=e.querySelector(".js-discussion-comment-thread-expand-button");t&&(e.setAttribute("data-open-edit-form-after-load","true"),t.click())}o(Vt,"clickShowMoreButton");function ft(e){return e.closest(".discussion-timeline-item.js-comment-container")}o(ft,"commentContainerFor");function Kt(e){const t=e.querySelector(".js-inline-comment-form-container");return t?t.classList.contains("open"):!1}o(Kt,"isReplyFormOpen"),(0,h.N7)(".js-remove-error-state-on-click > details",{add:e=>zt(e)});function zt(e){var t;const n=(t=document.getElementById("discussion_category_id"))==null?void 0:t.getAttribute("value");if(!n)return;const s=e.querySelector(`.discussion-category-${n}`);!s||s.click()}o(zt,"conditionallyReselectCategory");var te=u(55182),gt=u(10900);const Xt=o(async(e,t,n,s)=>{const a=new FormData;a.append("question",n);for(const g of s)a.append("options[]",g);return await fetch(e,{body:a,method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":t}})},"sendRequest");class vt{constructor(t){this.pollForm=t,this.pollPreviewUrl=this.pollForm.getAttribute("data-poll-preview-url")||""}hide(){var t;this.pollForm.hidden=!0,(t=this.pollForm)==null||t.setAttribute("aria-hidden","true")}show(){var t;this.pollForm.hidden=!1,(t=this.pollForm)==null||t.setAttribute("aria-hidden","false")}getCsrfInputValue(){const t=this.pollForm.querySelector(".js-poll-preview-url-post-csrf");return t?t.value:""}getOptions(){const t=[],n=this.pollForm.querySelector("#poll-option-container");if(!n)return t;const s=n.querySelectorAll(".js-poll-option");for(const a of s)a.value&&t.push(a.value);return t}getQuestion(){const t=this.pollForm.querySelector(".js-poll-form-input-question");return t?t.value:""}}o(vt,"PollFormElement");class yt{constructor(t){this.pollFormElement=t}hidePollForm(){this.pollFormElement.hide()}showPollForm(){this.pollFormElement.show()}async getPreview(){const t=this.pollFormElement.getQuestion(),n=this.pollFormElement.getOptions();return t&&n.length>0?await(await Xt(this.pollFormElement.pollPreviewUrl,this.pollFormElement.getCsrfInputValue(),t,n)).text():""}}o(yt,"Poll");let K;(0,h.N7)(".js-discussion-poll-form-component",e=>{K=new yt(new vt(e))}),(0,r.on)("preview:rendered",".js-previewable-comment-form",async function(e){if(!K)return;const n=e.currentTarget.querySelector(".comment-body"),s=await K.getPreview();n.append((0,gt.r)(document,s)),K.hidePollForm()}),(0,r.on)("poll-preview:toggle:off",".js-discussion-poll-form-component",async function(){if(!K)return;const e=document.querySelector(".js-discussion-category-select");if(e){const t=e.querySelector("#category-select-header");if(!t)return;t.getAttribute("data-supports-polls")&&K.showPollForm()}else K.showPollForm()});const Zt=o(async(e,t,n)=>{const s=new FormData;return s.append("option_id",n),await fetch(e,{body:s,method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":t}})},"polls_voting_sendRequest");class bt{constructor(t){this.optionsElement=t}checkedValue(){var t;const n=(t=this.optionsElement)==null?void 0:t.querySelector(".js-discussion-poll-option:checked");return n==null?void 0:n.value}hide(){var t;this.optionsElement&&(this.optionsElement.hidden=!0),(t=this.optionsElement)==null||t.setAttribute("aria-hidden","true")}show(){var t;this.optionsElement&&(this.optionsElement.hidden=!1),(t=this.optionsElement)==null||t.setAttribute("aria-hidden","false")}}o(bt,"PollOptionsElement");class wt{constructor(t){this.resultsElement=t}hide(){var t;this.resultsElement&&(this.resultsElement.hidden=!0),(t=this.resultsElement)==null||t.setAttribute("aria-hidden","true")}show(){var t;this.resultsElement&&(this.resultsElement.hidden=!1),(t=this.resultsElement)==null||t.setAttribute("aria-hidden","false")}}o(wt,"PollResultsElement");class Et{constructor(t){this.pollForm=t,this.resultsElement=new wt(t.querySelector(".js-discussion-poll-results")),this.optionsElement=new bt(t.querySelector(".js-discussion-poll-options")),this.hideResultsButton=t.querySelector(".js-poll-hide-results"),this.showResultsButton=t.querySelector(".js-poll-show-results"),this.voteButton=t.querySelector(".js-discussion-poll-vote-button"),this.voteUrl=this.pollForm.getAttribute("data-vote-url")||"",this.pollUrl=this.pollForm.getAttribute("data-poll-url")||"",this.pollLocked=this.pollForm.getAttribute("data-poll-locked")||""}getCsrfInputValue(){const t=this.pollForm.querySelector(".js-data-url-post-csrf");return t?t.value:""}hideResults(){var t,n,s,a;this.resultsElement.hide(),this.optionsElement.show(),this.hideResultsButton&&(this.hideResultsButton.hidden=!0),(t=this.hideResultsButton)==null||t.setAttribute("aria-hidden","true"),this.showResultsButton&&(this.showResultsButton.hidden=!1),(n=this.showResultsButton)==null||n.setAttribute("aria-hidden","false"),this.pollLocked==="true"?(s=this.voteButton)==null||s.setAttribute("aria-disabled","true"):(a=this.voteButton)==null||a.setAttribute("aria-disabled","false")}showResults(){var t,n,s;this.resultsElement.show(),this.optionsElement.hide(),this.hideResultsButton&&(this.hideResultsButton.hidden=!1),(t=this.hideResultsButton)==null||t.setAttribute("aria-hidden","false"),this.showResultsButton&&(this.showResultsButton.hidden=!0),(n=this.showResultsButton)==null||n.setAttribute("aria-hidden","true"),(s=this.voteButton)==null||s.setAttribute("aria-disabled","true")}}o(Et,"polls_voting_PollFormElement");class Ct{constructor(t){this.pollFormElement=t,this.bindHideResultsClick(t.hideResultsButton),this.bindShowResultsClick(t.showResultsButton),this.bindVoteClick(t.voteButton)}bindHideResultsClick(t){t==null||t.addEventListener("click",async()=>{this.hideResults()})}bindShowResultsClick(t){t==null||t.addEventListener("click",async()=>{this.showResults()})}bindVoteClick(t){t==null||t.addEventListener("click",async()=>{this.vote()})}async vote(){const t=this.pollFormElement.optionsElement.checkedValue();if(t&&(await Zt(this.pollFormElement.voteUrl,this.pollFormElement.getCsrfInputValue(),t)).ok)try{const a=await(await fetch(this.pollFormElement.pollUrl,{headers:{Accept:"text/html"}})).text();this.pollFormElement.pollForm.replaceWith((0,gt.r)(document,a))}catch{return}}hideResults(){this.pollFormElement.hideResults()}showResults(){this.pollFormElement.showResults()}}o(Ct,"polls_voting_Poll"),(0,h.N7)(".js-discussion-poll-component",e=>{new Ct(new Et(e))});var Yt=u(34782);const Qt=new IntersectionObserver(function(e){for(const t of e)t.isIntersecting&&(t.target.hidden=!0)},{root:null,rootMargin:"0px",threshold:.1});(0,h.N7)(".js-whats-new",e=>Qt.observe(e)),(0,r.on)("click",".js-whats-new-state",e=>{var t;((t=e.target)==null?void 0:t.parentNode).scrollIntoView({behavior:"smooth",block:"start"})});const Tt=o(()=>{const e=document.querySelector(".js-whats-new-state");!e||(e.hidden=!1)},"showWhatsNew");document.addEventListener("pjax:end",Tt),async function(){await Yt.x,setTimeout(Tt,1e3)}()},1314:(x,E,u)=>{u.d(E,{N:()=>y,x:()=>b});var m=u(34782);let h=null;(async function(){await m.x,v()})();function y(r){b(p(r))}o(y,"announceFromElement");function b(r){!h||(h.textContent="",h.textContent=r)}o(b,"announce");function v(){h=document.createElement("div"),h.setAttribute("aria-live","polite"),h.classList.add("sr-only"),document.body.append(h)}o(v,"createNoticeContainer");function p(r){return(r.getAttribute("aria-label")||r.innerText||"").trim()}o(p,"getTextContent")},59817:(x,E,u)=>{u.d(E,{Z:()=>Y});const m=Math.random,h=Math.cos,y=Math.sin,b=Math.PI,v=b*2,p=40,r=3,i=12-r,l=10,d=100,c=-.1,w=-c-c,T=.13,j=.18,f=.4,A=.7-f;let M,W;const q=[],V=["#6a737d","#0366d6","#28a745","#ffd33d","#f66a0a","#6f42c1","#ea4aaa"];function J(){const S=Math.floor(Math.random()*V.length);return V[S]}o(J,"colorTheme");function tt(S,_,B){return(1-h(b*B))/2*(_-S)+S}o(tt,"interpolation");const G=1/l,et=G+G;function nt(){const S=[G,1-G];let _=1-et;const B=[0,1];for(;_;){let L=_*m(),C,R,U,I,k;for(C=0,R=S.length,_=0;C<R;C+=2){if(I=S[C],k=S[C+1],U=k-I,L<_+U){const H=L+I-_;B.push(H),L=H;break}_+=U}const $=L-G,N=L+G;for(C=S.length-1;C>0;C-=2)R=C-1,I=S[R],k=S[C],I>=$&&I<N?k>N?S[R]=N:S.splice(R,2):I<$&&k>$&&(k<=N?S[C]=$:S.splice(C,0,$,N));for(C=0,R=S.length,_=0;C<R;C+=2)_+=S[C+1]-S[C]}return B.sort()}o(nt,"createPoisson");const D=document.createElement("div");D.style.position="fixed",D.style.top="0",D.style.left="0",D.style.width="100%",D.style.height="0",D.style.overflow="visible",D.style.zIndex="9999";class Z{constructor(_){this.frame=0,this.outer=document.createElement("div"),this.inner=document.createElement("div"),this.outer.appendChild(this.inner),this.outer.style.position="absolute",this.outer.style.width=`${r+i*m()}px`,this.outer.style.height=`${r+i*m()}px`,this.inner.style.width="100%",this.inner.style.height="100%",this.inner.style.backgroundColor=_(),this.outer.style.perspective="50px",this.outer.style.transform=`rotate(${360*m()}deg)`,this.theta=360*m(),this.axis=`rotate3D(${h(360*m())},${h(360*m())},0,`,this.inner.style.transform=`${this.axis}${this.theta}deg)`,this.dTheta=f+A*m(),this.x=window.innerWidth*m(),this.y=-d,this.dx=y(c+w*m()),this.dy=T+j*m(),this.outer.style.left=`${this.x}px`,this.outer.style.top=`${this.y}px`,this.splineX=nt(),this.splineY=[];const B=this.splineX.length-1;for(let L=1;L<B;++L)this.splineY[L]=d*m();this.splineY[0]=this.splineY[B]=d*m()}update(_,B){this.frame+=B,this.x+=this.dx*B,this.y+=this.dy*B,this.theta+=this.dTheta*B;let L=this.frame%7777/7777,C=0,R=1;for(;L>=this.splineX[R];)C=R++;const U=tt(this.splineY[C],this.splineY[R],(L-this.splineX[C])/(this.splineX[R]-this.splineX[C]));return L*=v,this.inner.style.transform=`${this.axis}${this.theta}deg)`,this.outer.style.left=`${this.x+U*h(L)}px`,this.outer.style.top=`${this.y+U*y(L)}px`,this.y>_+d}}o(Z,"Confetto");function Y(S){const _=S==null?5e3:S;if(!W){document.body.appendChild(D);const B=o(()=>{const R=new Z(J);q.push(R),D.appendChild(R.outer),M=window.setTimeout(B,p*m())},"addConfetto");B();let L;const C=o(R=>{const U=L?R-L:0;L=R;const I=window.innerHeight;for(let k=q.length-1;k>=0;--k)q[k].update(I,U)&&(D.removeChild(q[k].outer),q.splice(k,1));if(M||q.length){W=requestAnimationFrame(C);return}document.body.removeChild(D),W=void 0},"loop");window.setTimeout(function(){clearTimeout(M),M=void 0},_),requestAnimationFrame(C)}}o(Y,"poof")},95140:(x,E,u)=>{u.d(E,{j:()=>b,w:()=>v});var m=u(59753),h=u(78694),y=u(84570);(0,m.on)("click",".js-toggle-inline-comment-form",function(p){const r=p.currentTarget.closest(".js-line-comments");b(r)}),(0,m.on)("quote-selection",".js-line-comments",function(p){b(p.currentTarget),p.stopPropagation()}),(0,y.w4)("keydown",".js-inline-comment-form-container form .js-comment-field",function(p){const r=p.target;if(!r.classList.contains("js-navigation-enable")&&p.key==="Escape"&&r.value.length===0){const i=r.closest("form");v(i),p.preventDefault()}}),(0,m.on)("click",".js-hide-inline-comment-form",function(p){const r=p.currentTarget.closest("form");!(0,h.T)(r)||confirm(p.target.getAttribute("data-confirm-cancel-text"))?v(r):p.preventDefault()});function b(p){var r;const i=p.querySelector(".js-inline-comment-form-container");i.classList.add("open"),(r=i.querySelector(".js-write-tab"))==null||r.click(),i.querySelector(".js-comment-field").focus(),(0,m.f)(i,"inlinecomment:focus")}o(b,"focusForm");function v(p){p.reset();const r=p.closest(".js-inline-comment-form-container");r.classList.remove("open");const i=r.querySelector(".js-multi-line-preview");i&&(i.hidden=!0),(0,m.f)(r,"inlinecomment:collapse")}o(v,"blurForm")},55182:(x,E,u)=>{var m=u(1314),h=u(64463);const y=o(async(r,i,l,d)=>{const c=new FormData;return d===!0&&c.append("upvote","true"),await fetch(r,{body:l==="delete"?"":c,method:l,mode:"same-origin",headers:{"Scoped-CSRF-Token":i}})},"sendRequest");class b{constructor(i){this.voteCountElement=i}getLabel(){var i;return((i=this.voteCountElement)==null?void 0:i.getAttribute("data-upvote-label"))||""}getText(){var i;return((i=this.voteCountElement)==null?void 0:i.textContent)||""}}o(b,"VoteCountElement");class v{constructor(i){this.voteForm=i,this.voteButton=this.voteForm.querySelector(".js-upvote-button"),this.defaultVoteCountElement=new b(i.querySelector(".js-default-vote-count")),this.upvotedCountElement=new b(i.querySelector(".js-upvoted-vote-count")),this.url=this.voteForm.getAttribute("data-url")||""}isUpvoted(){return this.voteForm.getAttribute("data-upvoted")==="true"}getCsrfDeleteInputValue(){const i=this.voteForm.querySelector(".js-data-url-delete-csrf");return i?i.value:""}getCsrfPutInputValue(){const i=this.voteForm.querySelector(".js-data-url-put-csrf");return i?i.value:""}simulateUpvote(){var i,l,d,c;this.voteForm.setAttribute("data-upvoted","true"),this.voteForm.getAttribute("data-new-upvote")&&((i=this.voteForm.querySelector(".js-upvote-button"))==null||i.classList.add("user-has-reacted","color-bg-accent"),(l=this.voteForm.querySelector(".js-upvote-button"))==null||l.classList.remove("color-fg-muted")),this.voteForm.classList.add("is-upvoted"),(d=this.voteButton)==null||d.setAttribute("aria-label",this.upvotedCountElement.getLabel()),(c=this.voteButton)==null||c.setAttribute("aria-pressed","true"),(0,m.x)(`${this.upvotedCountElement.getText()} Upvotes`)}simulateUpvoteDeletion(){var i,l,d,c;this.voteForm.setAttribute("data-upvoted","false"),this.voteForm.getAttribute("data-new-upvote")&&((i=this.voteForm.querySelector(".js-upvote-button"))==null||i.classList.remove("user-has-reacted","color-bg-accent"),(l=this.voteForm.querySelector(".js-upvote-button"))==null||l.classList.add("color-fg-muted")),this.voteForm.classList.remove("is-upvoted"),(d=this.voteButton)==null||d.setAttribute("aria-label",this.defaultVoteCountElement.getLabel()),(c=this.voteButton)==null||c.setAttribute("aria-pressed","false"),(0,m.x)(`${this.defaultVoteCountElement.getText()} Upvotes`)}displayUpVoteError(i){const l=this.voteForm.querySelector(".js-upvote-error");l instanceof HTMLElement&&(l.textContent=i,l.hidden=!1)}hideVoteErrors(){const i=this.voteForm.querySelector(".js-upvote-error");i instanceof HTMLElement&&(i.hidden=!0)}}o(v,"VoteFormElement");class p{constructor(i){this.voteFormElement=i}animateUpvote(i){i?this.voteFormElement.simulateUpvoteDeletion():this.voteFormElement.simulateUpvote()}animateUpvoteUndo(i){i?this.voteFormElement.simulateUpvote():this.voteFormElement.simulateUpvoteDeletion()}async click(){this.voteFormElement.hideVoteErrors();const i=this.voteFormElement.isUpvoted(),l=i?this.voteFormElement.getCsrfDeleteInputValue():this.voteFormElement.getCsrfPutInputValue(),d=i?"delete":"put";this.animateUpvote(i);const c=await y(this.voteFormElement.url,l,d,!i);if(!c.ok){const w=await c.json();this.voteFormElement.displayUpVoteError(w.error),this.animateUpvoteUndo(i)}}}o(p,"Upvote"),(0,h.N7)(".js-upvote-button",r=>{if(!(r instanceof HTMLElement)||!(r.parentElement instanceof HTMLElement))return;const i=new p(new v(r.parentElement));r.addEventListener("click",async()=>{await i.click()})})},34782:(x,E,u)=>{u.d(E,{C:()=>h,x:()=>m});const m=function(){return document.readyState==="interactive"||document.readyState==="complete"?Promise.resolve():new Promise(y=>{document.addEventListener("DOMContentLoaded",()=>{y()})})}(),h=function(){return document.readyState==="complete"?Promise.resolve():new Promise(y=>{window.addEventListener("load",y)})}()},52660:(x,E,u)=>{u.d(E,{D:()=>b,a:()=>y});var m=u(2699),h=u(10900);async function y(v,p,r){const i=new Request(p,r);i.headers.append("X-Requested-With","XMLHttpRequest");const l=await self.fetch(i);if(l.status<200||l.status>=300)throw new Error(`HTTP ${l.status}${l.statusText||""}`);return(0,m.t)((0,m.P)(v),l),(0,h.r)(v,await l.text())}o(y,"fetchSafeDocumentFragment");function b(v,p,r=1e3){return o(async function i(l){const d=new Request(v,p);d.headers.append("X-Requested-With","XMLHttpRequest");const c=await self.fetch(d);if(c.status<200||c.status>=300)throw new Error(`HTTP ${c.status}${c.statusText||""}`);if(c.status===200)return c;if(c.status===202)return await new Promise(w=>setTimeout(w,l)),i(l*1.5);throw new Error(`Unexpected ${c.status} response status from poll endpoint`)},"poll")(r)}o(b,"fetchPoll")},78694:(x,E,u)=>{u.d(E,{M:()=>y,T:()=>b});var m=u(14840),h=u(82036);function y(f,A=!1){return b(f)||d(f,A)||T(f)||j(f)}o(y,"hasInteractions");function b(f){for(const A of f.querySelectorAll("input, textarea"))if((A instanceof HTMLInputElement||A instanceof HTMLTextAreaElement)&&v(A))return!0;return!1}o(b,"hasDirtyFields");function v(f){if(f instanceof HTMLInputElement&&(f.type==="checkbox"||f.type==="radio")){if(f.checked!==f.defaultChecked)return!0}else if(f.value!==f.defaultValue)return!0;return!1}o(v,"formFieldValueChanged");let p;async function r(f,A){p=f;try{await A()}finally{p=null}}o(r,"withActiveElement");function i(f){return p instanceof Element?p:f&&f.ownerDocument&&f.ownerDocument.activeElement?f.ownerDocument.activeElement:null}o(i,"getActiveElement");let l;document.addEventListener("mouseup",function(f){l=f.target});function d(f,A){const M=i(f);return M===null||A&&M===f?!1:M===f&&(0,h.sw)(M)||f.contains(M)&&!w(M)?!0:l instanceof Element&&f.contains(l)&&!!l.closest("details[open] > summary")}o(d,"hasFocus");const c="a[href], button";function w(f){var A;if(f instanceof m.Z)return!0;const M=f instanceof HTMLAnchorElement||f instanceof HTMLButtonElement,W=(A=f.parentElement)==null?void 0:A.classList.contains("task-list-item");if(M&&W)return!0;if(!(l instanceof Element))return!1;const q=f.closest(c);if(!q)return!1;const V=l.closest(c);return q===V}o(w,"activeElementIsSafe");function T(f){return f.matches(":active:enabled")}o(T,"hasMousedown");function j(f){return!!(f.closest(".is-dirty")||f.querySelector(".is-dirty"))}o(j,"markedAsDirty")},2699:(x,E,u)=>{u.d(E,{P:()=>m,t:()=>y});function m(b){const v=[...b.querySelectorAll("meta[name=html-safe-nonce]")].map(p=>p.content);if(v.length<1)throw new Error("could not find html-safe-nonce on document");return v}o(m,"getDocumentHtmlSafeNonces");class h extends Error{constructor(v,p){super(`${v} for HTTP ${p.status}`);this.response=p}}o(h,"ResponseError");function y(b,v,p=!1){const r=v.headers.get("content-type")||"";if(!p&&!r.startsWith("text/html"))throw new h(`expected response with text/html, but was ${r}`,v);if(p&&!(r.startsWith("text/html")||r.startsWith("application/json")))throw new h(`expected response with text/html or application/json, but was ${r}`,v);const i=v.headers.get("x-html-safe");if(i){if(!b.includes(i))throw new h("response X-HTML-Safe nonce did not match",v)}else throw new h("missing X-HTML-Safe nonce",v)}o(y,"verifyResponseHtmlSafeNonce")},48818:(x,E,u)=>{u.d(E,{q:()=>l});var m=u(90420),h=u(51639),y=u(48835),b=u(16938),v=Object.defineProperty,p=Object.getOwnPropertyDescriptor,r=o((d,c,w,T)=>{for(var j=T>1?void 0:T?p(c,w):c,f=d.length-1,A;f>=0;f--)(A=d[f])&&(j=(T?A(c,w,j):A(j))||j);return T&&j&&v(c,w,j),j},"__decorateClass");const i=`
  <div data-target="machine-translation.error" class="m-3" hidden>
    <div data-view-component="true" class="flash flash-error">
      An error occurred while translating this comment.
      <div data-view-component="true" class="flash-action">
        <button data-target="machine-translation.errorButton" type="button" data-view-component="true" class="btn">Try again</button>
      </div>
    </div>
  </div>
`;let l=o(class extends y.U{constructor(){super();this.innerHTML+=i,this.payloadMetadata={},this.error.querySelector("button").addEventListener("click",()=>this.load())}set sourceElement(d){this.element=d}get sourceElement(){if(!this.element)throw new Error("Source element not defined");return this.element}set language(d){this.contentLanguage=d}get language(){return this.contentLanguage}async load(){try{this.spinner.hidden=!1,this.details.hidden=!0,this.error.hidden=!0,this.showTranslation(await this.getTranslation())}catch{this.spinner.hidden=!0,this.error.hidden=!1,this.scrollPageTo(this.error)}}async resolveLanguage(){if(!this.language){const d=this.sourceText();this.language=await(0,h.ej)(d)}return Promise.resolve(this.language)}set payloadMetadata(d){this._payloadMetadata=d}get payloadMetadata(){return this._payloadMetadata}async getTranslation(){const d=await this.resolveLanguage(),c=[this.targetLanguage],w=this.payloadMetadata,T=this.sourceText();return(await(0,h.SV)("/translate",{text:T,to:c,from:d,...w}))[0].translations[0].text}sourceText(){return this.sourceElement.outerHTML}async isTranslatable(){const d=this.targetLanguage;if(!(0,h.Eb)(d))return Promise.resolve(!1);const c=await this.resolveLanguage();return(0,h.Eb)(c)?!await this.alreadyTranslated():Promise.resolve(!1)}async alreadyTranslated(){const d=this.targetLanguage,c=await this.resolveLanguage();return d===c}translatedToNotice(){return b.q[this.targetLanguage].translatedTo}},"MachineTranslationElement");r([m.fA],l.prototype,"error",2),r([m.fA],l.prototype,"errorButton",2),l=r([m.Ih],l)},98555:(x,E,u)=>{u.d(E,{Z:()=>p});var m=u(90420),h=Object.defineProperty,y=Object.getOwnPropertyDescriptor,b=o((r,i,l,d)=>{for(var c=d>1?void 0:d?y(i,l):i,w=r.length-1,T;w>=0;w--)(T=r[w])&&(c=(d?T(i,l,c):T(c))||c);return d&&c&&h(i,l,c),c},"__decorateClass");async function v(r){return(await fetch(r)).text()}o(v,"fetchHTML");let p=o(class extends HTMLElement{constructor(){super(...arguments);this.src=""}appendTo(r){return r.appendChild(this)}async load(){this.innerHTML=await v(this.src)}},"RemoteContentElement");b([m.Lj],p.prototype,"src",2),p=b([m.Ih],p)},51639:(x,E,u)=>{u.d(E,{Eb:()=>h,SV:()=>y,ej:()=>b,i0:()=>p});var m=u(16938);function h(r){return!!m.q[r]}o(h,"isLanguageSupported");async function y(r="",i={},l=1e4){return(await v(`https://translator.github.com${r}`,{timeout:l,mode:"cors",method:"POST",body:JSON.stringify(i),headers:new Headers({"Content-Type":"application/json"})})).json()}o(y,"translationApi");async function b(r){var i;return(i=(await y("/detect",{text:r}))[0])==null?void 0:i.language.slice(0,2).toLowerCase()}o(b,"detectLanguage");async function v(r,i){const{timeout:l}=i,d=new AbortController,c=setTimeout(()=>d.abort(),l),w=await fetch(r,{...i,signal:d.signal});return clearTimeout(c),w}o(v,"fetchWithTimeout");function p(r){return m.q[r]}o(p,"getTranslation")},48835:(x,E,u)=>{u.d(E,{U:()=>l});var m=u(90420),h=u(38772),y=u(51639),b=Object.defineProperty,v=Object.getOwnPropertyDescriptor,p=o((d,c,w,T)=>{for(var j=T>1?void 0:T?v(c,w):c,f=d.length-1,A;f>=0;f--)(A=d[f])&&(j=(T?A(c,w,j):A(j))||j);return T&&j&&b(c,w,j),j},"__decorateClass");const r=o(d=>d.tagName.toLowerCase(),"tagName");function i(d){const c=r(d);return h.dy`<div data-target="${c}.spinner" hidden>
      <p class="text-center">
        <svg
          aria-label="Loading..."
          style="box-sizing: content-box; color: var(--color-icon-primary);"
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          data-view-component="true"
          class="anim-rotate"
        >
          <circle
            cx="8"
            cy="8"
            r="7"
            stroke="currentColor"
            stroke-opacity="0.25"
            stroke-width="2"
            vector-effect="non-scaling-stroke"
          ></circle>
          <path
            d="M15 8a7.002 7.002 0 00-7-7"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            vector-effect="non-scaling-stroke"
          ></path>
        </svg>
      </p>
    </div>

    <details data-target="${c}.details" class="pl-3 pb-3" open hidden>
      <summary data-target="${c}.summary" class="color-fg-muted"></summary>
      <div data-target="${c}.content" class="pt-2"></div>
      <p class="pt-2">
        <span
          title="Feature Release Label: Beta"
          aria-label="Feature Release Label: Beta"
          data-view-component="true"
          class="Label Label--success Label--inline mr-1 px-1"
          >Beta</span
        >
        <span data-target="${c}.feedbackText"></span>
        <a data-target="${c}.feedbackLink" class="Link--secondary" href="#">{{feedbackLinkText}}</a>
      </p>
    </details>

    <span class="color-fg-muted"></span> `}o(i,"template");let l=o(class extends HTMLElement{constructor(){super();(0,h.sY)(i(this),this)}set targetLanguage(d){this.setAttribute("to",d)}get targetLanguage(){return this.getAttribute("to")||navigator.languages[0].slice(0,2).toLowerCase()}set translation(d){this.content.innerHTML=d}showTranslation(d){d&&(this.translation=d);const c=this.targetLanguage;this.summary.textContent=(0,y.i0)(c).translatedTo,this.feedbackText.textContent=(0,y.i0)(c).wasThisTranslationHelpful,this.feedbackLink.textContent=(0,y.i0)(c).giveFeedback,this.feedbackLink.href=(0,y.i0)(c).translationFeedbackLink,this.details.hidden=!1,this.spinner.hidden=!0,this.scrollPageTo(this.details)}scrollPageTo(d){const c="smooth";d.scrollIntoView({behavior:c,block:"nearest"})}},"TranslationPlaceholderElement");p([m.fA],l.prototype,"summary",2),p([m.fA],l.prototype,"spinner",2),p([m.fA],l.prototype,"content",2),p([m.fA],l.prototype,"feedbackText",2),p([m.fA],l.prototype,"feedbackLink",2),p([m.fA],l.prototype,"details",2),l=p([m.Ih],l)},16938:(x,E,u)=>{u.d(E,{q:()=>m});const m={en:{translateTo:"Translate to English",translatedTo:"Translated to English",wasThisTranslationHelpful:"Was this translation helpful?",giveFeedback:"Give Feedback",translationFeedbackLink:"https://github.com/github/feedback/discussions/4373",viewOriginal:"View original",originalContent:{en:"Original comment in English",es:"Original comment in Spanish",pt:"Original comment in Portuguese",ko:"Original comment in Korean"}},es:{translateTo:"Traducir al Espa\xF1ol",translatedTo:"Traducido al Espa\xF1ol",wasThisTranslationHelpful:"\xBFFue \xFAtil esta traducci\xF3n?",giveFeedback:"Env\xEDa tus comentarios",translationFeedbackLink:"https://github.com/github/feedback/discussions/6534",viewOriginal:"Ver original",originalContent:{en:"Comentario original en Ingl\xE9s",es:"Comentario original en Espa\xF1ol",pt:"Comentario original en Portugu\xE9s",ko:"Comentario original en Coreano"}},pt:{translateTo:"Traduzir para Portugu\xEAs",translatedTo:"Traduzido para o Portugu\xEAs",wasThisTranslationHelpful:"Esta tradu\xE7\xE3o foi \xFAtil?",giveFeedback:"D\xEA sua opini\xE3o",translationFeedbackLink:"https://github.com/github/feedback/discussions/4374",viewOriginal:"Ver original",originalContent:{en:"Coment\xE1rio original em Ingl\xEAs",es:"Coment\xE1rio original em Espanhol",pt:"Coment\xE1rio original em Portugu\xEAs",ko:"Coment\xE1rio original em Coreano"}},ko:{translateTo:"\uD55C\uAD6D\uC5B4\uB85C \uBC88\uC5ED",translatedTo:"\uD55C\uAD6D\uC5B4\uB85C \uBC88\uC5ED",wasThisTranslationHelpful:"\uC774 \uBC88\uC5ED\uC774 \uB3C4\uC6C0\uC774 \uB418\uC168\uB098\uC694?",giveFeedback:"\uD53C\uB4DC\uBC31 \uC81C\uACF5",translationFeedbackLink:"https://github.com/github/feedback/discussions/4372",viewOriginal:"\uC6D0\uBCF8 \uBCF4\uAE30",originalContent:{en:"\uC601\uC5B4\uB85C \uB41C \uC6D0\uBCF8 \uC8FC\uC11D",es:"\uC2A4\uD398\uC778\uC5B4\uB85C \uB41C \uC6D0\uBCF8 \uC8FC\uC11D",pt:"\uD3EC\uB974\uD22C\uAC08\uC5B4\uB85C \uB41C \uC6D0\uBCF8 \uC8FC\uC11D",ko:"\uD55C\uAD6D\uC5B4\uB85C \uB41C \uC6D0\uBCF8 \uC8FC\uC11D"}}}},84570:(x,E,u)=>{u.d(E,{ZG:()=>v,q6:()=>r,w4:()=>p});var m=u(8439);let h=!1;const y=new m.Z;function b(i){const l=i.target;if(l instanceof HTMLElement&&l.nodeType!==Node.DOCUMENT_NODE)for(const d of y.matches(l))d.data.call(null,l)}o(b,"handleFocus");function v(i,l){h||(h=!0,document.addEventListener("focus",b,!0)),y.add(i,l),document.activeElement instanceof HTMLElement&&document.activeElement.matches(i)&&l(document.activeElement)}o(v,"onFocus");function p(i,l,d){function c(w){const T=w.currentTarget;!T||(T.removeEventListener(i,d),T.removeEventListener("blur",c))}o(c,"blurHandler"),v(l,function(w){w.addEventListener(i,d),w.addEventListener("blur",c)})}o(p,"onKey");function r(i,l){function d(c){const{currentTarget:w}=c;!w||(w.removeEventListener("input",l),w.removeEventListener("blur",d))}o(d,"blurHandler"),v(i,function(c){c.addEventListener("input",l),c.addEventListener("blur",d)})}o(r,"onInput")},10900:(x,E,u)=>{u.d(E,{r:()=>m});function m(h,y){const b=h.createElement("template");return b.innerHTML=y,h.importNode(b.content,!0)}o(m,"parseHTML")}},x=>{var E=o(m=>x(x.s=m),"__webpack_exec__");x.O(0,[5724,5388,93,9848,4920,3302],()=>E(60161));var u=x.O()}]);})();

//# sourceMappingURL=discussions-0d240f2b2b1f.js.map